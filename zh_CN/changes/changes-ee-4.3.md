---
# 编写日期
date: 2020-02-07 17:15:26
# 作者 Github 名称
author: wivwiv
# 关键字
keywords:
# 描述
description:
# 分类
category:
# 引用
ref:
---

# 版本发布

## 4.3.7 版本

*发布日期: 2022-02-11*

### 重要

我们在 4.3.7 中修复了 License 总连接数计算的 Bug，License 将正确地检查集群的总连接数，而非错误地仅检查每个节点上的连接数。

请计划升级的用户注意此变化可能导致的客户端达到 License 限制而无法连接的可能性。

### 增强

- license 连接数预警，默认连接数达到证书允许的 80% 则告警，小于 75% 时解除告警。用户也可在 `emqx.conf` 中进行自定义：`license.connection_high_watermark_alarm` , `license.connection_low_watermark_alarm`
- license 过期预警，当有效期小于 30 天时，会告警提示
- 规则引擎支持为客户端消息异常丢失事件配置规则与动作，以增强用户在这一场景的自定义处理能力
- 改进规则引擎 SQL 匹配执行过程中的相关统计指标
- 客户端模糊搜索支持 `*`， `(`，`)` 等特殊字符
- 改进 ACL 相关统计指标，解决命中 ACL 缓存导致计数不增加的问题
- Webhook 事件通知中新增 `connected_at` 字段
- 在因持有锁太久而终止客户端状态之前记录客户端状态

### 修复

- 修复数据导入导出在某些情况下不可用的问题
- Module 更新机制改进，解决更新失败后 Module 不可用的问题
- 修复规则引擎在执行比较大小的语句时候未进行类型检查的问题
- 修复更新规则引擎动作后相关计数清零的问题
- 修复 Metrics 接口默认情况下不返回 client.acl.deny 等认证鉴权指标的问题
- 修复订阅查询接口未返回分页数据的问题
- 修复 STOMP 处理 TCP 粘包时解析失败的问题
- 修复客户端过滤查询时会话创建时间选项不可用的问题
- 修复重启后内存告警可能不会触发的问题
- 修复 `emqx_auth_mnesia` 插件中存在用户数据时导入数据崩溃的问题

## 4.3.6 版本

*发布日期: 2021-12-17*

EMQX 4.3.6 现已发布，主要包含以下改动:

### 增强

- 规则引擎现已支持 Ali Lindorm 数据库
- 支持配置是否继续投递空的保留消息，以适应仍在使用 MQTT v3.1 协议的用户
- 优化内置访问控制文件模块的使用交互

### 修复

- 修复内存占用计算错误的问题
- 修复规则引擎 Webhook Action 的 Path 参数不支持使用 ${Variable} 的问题
- 修复 RocketMQ 异步写入时数据乱码的问题
- 修复 RocketMQ 统计指标不准的问题
- 修复某些情况下更新或删除 MQTT Bridge 和 MQTT Subscribe 资源，会持续打印连接失败日志的问题
- 修复规则引擎保存数据到 MySQL 时可能出现较高失败率的问题
- 修复规则引擎 Clickhouse 离线消息功能不可用的问题
- 修复规则引擎 MongoDB 离线消息功能中 Max Returned Count 选项无法使用的问题
- 修复部分热配置失效的问题

## 4.3.5 版本

*发布日期: 2021-11-05*

EMQX 4.3.5 现已发布，主要包含以下改动:

### 增强

- 改进客户端踢除机制
- 为 LwM2M 网关添加新加密套件的支持
- 支持优先级队列的交错（以避免低优先级队列枯竭）
- 默认为 HTTP 认证插件关闭超级用户请求
- 优化 InfluxDB 写入性能
- InfluxDB 的 Tag Name 与 Field Name 支持使用占位符

### 重要修复

- 修复集群间调用可能导致客户端进程失去响应的问题
- 修复 WebHook TLS 不可用的问题
- 修复 MongoDB 资源不支持域名的问题
- 修复基于内置数据库的 ACL 的性能问题
- 修复基于内置数据库的认证错误转码 HTTP 请求参数的问题
- 修复 MySQL 认证模块可能启动失败的问题
- 修复 STOMP 网关若干问题

### 次要修复

- 修复规则引擎 Kafka 和 MongoDB 资源状态不准确的问题
- 修复包含 “\” 字符的 Client ID 无法进行模糊搜索的问题
- 修复可变字节整数可能大于 4 字节的问题
- 修复可能添加重复模块的问题
- 修复无法在 Dashboard 上重启 Listener 的问题

## 4.3.4 版本

*发布日期: 2021-09-18*

### 增强

- 规则引擎 数据桥接到pulsar 支持数据压缩
- 延长创建规则的超时间隔

### 修复

- 规则引擎 数据保存到InfluxDB 性能问题
- WebHook 无法配置 sni 导致某些情况下无法使用 HTTPS 的问题
- 规则引擎 关闭规则后资源无法释放的问题
- 规则引擎 离线消息 在某些情况下接收后无法删除的问题

## 4.3.3 版本

*发布日期: 2021-08-16*

### 增强

- 离线消息保存到Redis 支持清除残留数据
- ExHook 增加自动重连机制，超时参数 和 备选动作

### 修复

- 规则引擎无法使用HTTPS 连接到 InfluxDB
- 规则引擎 数据保存到InfluxDB 动作无法使用占位符
- 规则引擎 数据桥接到WebServer 无法使用Path
- grpc-client 超时处理逻辑
- ExProto bug，增加重试逻辑，减少一些不必要的打印

## 4.3.2 版本

*发布日期: 2021-07-17*

### 增强

- 增强 客户端上/下线消息增加更多的字段

### 修复

- LwM2M网关 管理页面无法打开的问题
- JT/T808网关 解析位置上报中自定义字段无法解析的问题
- acl.conf 文件格式错误导致ACL规则失效的问题
- 创建 auth_ldap 认证模块失败的问题
- 多语言协议解析 异常情况下无法停止的问题
- 规则引擎 无法创建Oracle 资源的问题
- 规则引擎 同步批量写入到SQL Server失败的问题

## 4.3.1 版本

*发布日期: 2021-06-05*

### 增强

- 规则引擎 离线消息保存中 TimeRange 字段的说明

### 修复

- 规则引擎 数据保存到 OpenTSDB 异常情况下无法写入的问题
- 热升级后版本显示错误的问题
- MQTT-SN 协议 `cleansession=false` 的客户端在恢复 session 时 topicid 丢失的问题
- 预置模块在重启后修改配置丢失的问题
- Dashboard 规则引擎编辑显示错误问题
- Dashboard 导航面包屑显示问题

## 4.3.0 版本

*发布日期: 2021-05-19*

### 增强

- 规则引擎消息桥接到 Kafka 分区支持动态扩容
- 规则引擎支持 ClickHouse 离线消息与代理订阅
- 规则引擎中支持批量操作动作默认启用批量异步模式
- 规则引擎数据保存到 InfluxDB 重构以增强性能
- 模块 消息下发 Kafka 消费组支持配置 Payload 格式

### 修复

- 规则引擎动作编辑数据不一致问题
- Dashboard 模块翻译问题
- 规则引擎 SQL语句支持 null 函数，undefined 转成 null
